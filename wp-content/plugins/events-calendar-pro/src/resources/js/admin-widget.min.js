/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

!function($,_){"use strict";var tribeWidget={},$body=$(document.body);tribeWidget.search_id=function(e){var id=void 0;return void 0!==e.id?id=e.id:void 0!==e.ID?id=e.ID:void 0!==e.value&&(id=e.value),void 0===e?void 0:id},tribeWidget.calendar_toggle=function($wrapper){$wrapper.find(".calendar-widget-filters-title").hide(),$wrapper.find(".calendar-widget-filters-operand").hide();var $hidden=$wrapper.find(".calendar-widget-added-filters");if($hidden.length){var calendar_filters=$hidden.val()?JSON.parse($hidden.val()):new Object,count=0;for(var tax in calendar_filters)count+=calendar_filters[tax].length;count>0&&($wrapper.find(".calendar-widget-filters-title").show(),count>1&&$wrapper.find(".calendar-widget-filters-operand").show())}},tribeWidget.select2=function(){var $select=$(this),args={};if($select.hasClass("select2-container")&&$select.select2("destroy"),$select.next().hasClass("select2-container")&&$select.next().remove(),$("body").hasClass("wp-customizer")&&(args.dropdownCssClass="tribe-customizer-select2"),$select.is("select")||(args.id=tribeWidget.search_id),args.allowClear=!0,$select.data("prevent-clear")&&(args.allowClear=!1),$select.data("options")&&(args.data=$select.data("options")),$select.data("hide-search")&&(args.minimumResultsForSearch=1/0),$select.is("[multiple]")&&(args.multiple=!0,_.isArray($select.data("separator"))?args.tokenSeparators=$select.data("separator"):args.tokenSeparators=[$select.data("separator")],args.separator=$select.data("separator"),args.regexSeparatorElements=["^("],args.regexSplitElements=["(?:"],$.each(args.tokenSeparators,(function(i,token){args.regexSeparatorElements.push("[^"+token+"]+"),args.regexSplitElements.push("["+token+"]")})),args.regexSeparatorElements.push(")$"),args.regexSplitElements.push(")"),args.regexSeparatorString=args.regexSeparatorElements.join(""),args.regexSplitString=args.regexSplitElements.join(""),args.regexToken=new RegExp(args.regexSeparatorString,"ig"),args.regexSplit=new RegExp(args.regexSplitString,"ig")),args.matcher=function(term,text){var result=0==text.toUpperCase().indexOf(term.toUpperCase());if(!result&&void 0!==args.tags){var possible=_.where(args.tags,{text:text});if(args.tags.length>0&&_.isObject(possible))result=0==obj.search_id(possible[0]).toUpperCase().indexOf(term.toUpperCase())}return result},$select.data("tags")&&(args.tags=$select.data("options"),args.initSelection=function(element,callback){var data=[];$(element.val().split(args.regexSplit)).each((function(){var obj={id:this,text:this};if(args.tags.length>0&&_.isObject(args.tags[0])){var _obj=_.where(args.tags,{value:this});_obj.length>0&&(obj={id:(obj=_obj[0]).value,text:obj.text})}data.push(obj)})),callback(data)},args.createSearchChoice=function(term,data){if(term.match(args.regexToken))return{id:term,text:term}},0===args.tags.length&&(args.formatNoMatches=function(){return $select.attr("placeholder")})),$select.data("source")){var source=$select.data("source");args.data={results:[]},args.escapeMarkup=function(m){return m},args.ajax={dataType:"json",type:"POST",url:window.ajaxurl,processResults:function(data){return $select.data("lastOptions",data.data),data.data}},args.ajax.data=function(search,page){return{action:"tribe_widget_dropdown_"+source,disabled:$select.data("disabled"),selected:$select.data("selected"),search:search,page:page}}}$select.on("open",(function(){$(".select2-drop").css("z-index",1e7)})).trigger("change.select2").select2TEC(args)},tribeWidget.conditional=function(conditional,$widget){var $this=$(conditional),field=$this.data("tribeConditionalField"),$conditionals=$widget.find(".js-tribe-conditional").filter('[data-tribe-conditional-field="'+field+'"]'),value=$this.val();$conditionals.hide().each((function(){var $conditional=$(this);$conditional.hasClass("tribe-select2")&&$conditional.prev(".select2-container").hide()})).filter('[data-tribe-conditional-value="'+value+'"]').show().each((function(){var $conditional=$(this);$conditional.hasClass("tribe-select2")&&$conditional.hide().prev(".select2-container").show()}))},tribeWidget.showFilters=function($widget){var $filter=$widget.find(".calendar-widget-filters-container"),$filterInput=$filter.find(".calendar-widget-added-filters");$filterInput.length&&$filterInput.val()&&$filterInput.val().length&&null!==$filterInput.val()&&"null"!==$filterInput.val()&&($filter.addClass("calendar-widget-filters-container--show"),$(".fl-nanoscroller").length&&void 0!==typeof FLBuilder&&FLBuilder._initScrollbars())},tribeWidget.hideFilters=function($widget){var $filter=$widget.find(".calendar-widget-filters-container"),$filterInput=$filter.find(".calendar-widget-added-filters");if($filterInput.length){var val=$filterInput.val();if(val&&val.length)val=JSON.parse(val),Object.keys(val).reduce((function(acc,curr){return!val[curr].length&&null!==val[curr].length&&acc}),!0)&&$filter.removeClass("calendar-widget-filters-container--show");else $filter.removeClass("calendar-widget-filters-container--show")}else $filter.removeClass("calendar-widget-filters-container--show")},tribeWidget.setup=function(e,$widget){if(void 0===$widget){var $target=$(e.target);if(!$target.parents(".widget-top").length||$target.parents("#available-widgets").length)return;($widget=$target.closest("div.widget")).find("[data-depends]").trigger("setup.dependency").trigger("verify.dependency")}void 0!==$widget&&("object"==typeof $widget&&($widget=$($widget)),"jQuery"!=typeof $widget&&($widget.is('[id*="tribe-"]')||!$widget.is(".so-content.panel-dialog")||$widget.find('[id^="widget-tribe-events-"]'))&&($widget.is('[id*="__i__"]')||($widget.find(".tribe-widget-select2").each(tribeWidget.select2).trigger("change.select2"),$widget.on("change",".js-tribe-condition",(function(){tribeWidget.conditional(this,$widget)})),tribeWidget.showFilters($widget),$("body").hasClass("wp-customizer")||($.isNumeric(e)||"widget-updated"===e.type)&&($widget.find(".js-tribe-condition").each((function(){tribeWidget.conditional(this,$widget)})),$widget.find("[data-depends]").trigger("setup.dependency").trigger("verify.dependency")))))},$((function(event){$("body").hasClass("wp-customizer")||(tribeWidget.showFilters,$(".tribe-widget-form").each(tribeWidget.setup))})),$(document).on({"widget-added widget-updated":function(e,widget){var $widget=$(widget);tribeWidget.setup(e,$widget),tribeWidget.showFilters($widget),$widget.find("[data-depends]").trigger("setup.dependency").trigger("verify.dependency")}}).on("change",".calendar-widget-add-filter",(function(e){var term_obj,$select=$(this),$widget=$select.parents(".tribe-widget-form"),$list=$widget.find(".calendar-widget-filter-list"),$field=$widget.find(".calendar-widget-added-filters"),values=$field.val()?JSON.parse($field.val()):{},term=$select.val(),disabled=$select.data("disabled")?$select.data("disabled"):[],options=$select.data("lastOptions");if(void 0!==term&&(null!==values&&"object"==typeof values||(values={}),void 0!==options&&void 0!==options.results&&options.results.forEach((function(group){group.tax&&(values[group.tax.name]||(values[group.tax.name]=[]),group.children.forEach((function(option){option&&option.id==term&&(term_obj=option,values[group.tax.name].push(option.id))})))})),term_obj))if(-1===$.inArray(term.id,values[term_obj.taxonomy.name])||-1===$.inArray(term,values[term_obj.taxonomy.name])){if(!$list.find('[data-term="'+term_obj.id+'"]').length){values[term_obj.taxonomy.name].push(term.id),$field.val(JSON.stringify(values));var $link=$("<a/>").attr({"data-tax":term_obj.taxonomy.name,"data-term":term_obj.id,class:"calendar-widget-remove-filter",href:"#"}).text("(remove)"),$remove=$("<span/>").append($link),$li=$("<li/>").addClass("calendar-widget-filter-item").html(term_obj.taxonomy.labels.name+": "+term_obj.text).append($remove);$list.append($li),disabled.push(term_obj.id),$select.data("disabled",disabled),tribeWidget.showFilters($widget),$select.val("")}}else $select.val("")})).on("click",".calendar-widget-remove-filter",(function(e){e.preventDefault();var $link=$(this),$widget=$link.parents(".tribe-widget-form"),$select=$widget.find(".calendar-widget-add-filter").not(".select2-container"),$field=$widget.find(".calendar-widget-added-filters"),values=$field.val()?JSON.parse($field.val()):{},termId=$link.data("term"),taxonomy=$link.data("tax"),disabled=$select.data("disabled")?$select.data("disabled"):[];values[taxonomy]&&(values[taxonomy]=_.without(values[taxonomy],termId.toString(),null)),$field.val(JSON.stringify(values)),$select.data("disabled",_.without(disabled,termId.toString())),$link.closest("li").remove(),$widget.find('input[name^="widget-tribe-"]').trigger("change"),tribeWidget.hideFilters($widget)})).on("click",".so-close",(function(e){$(".calendar-widget-add-filter").select2("close")})),$body.on("click.widgets-toggle",tribeWidget.setup),$(document).on("panelsopen",(function(e){$(".so-content.panel-dialog").each((function(){var $this=$(this);if(!$this.hasClass("widget")){var $id=$this.find('[id^="widget-tribe-"]').filter('[id$="-title"]').attr("id");if(!$id)return;$id=$id.substring(0,$id.indexOf("-title")),$this.attr("id",$id).addClass("widget"),tribeWidget.setup(e,$this),$(".so-duplicate").on("click",(function(e){$(".calendar-widget-add-filter").select2("close")})),$(".so-delete").on("click",(function(e){$(".calendar-widget-add-filter").select2("close")}))}}))})),$(document).on("change",".fl-builder-settings-lightbox",(function(event){tribeWidget.setup(event,$(".tribe-widget-form").first())}))}(jQuery.noConflict(),_);