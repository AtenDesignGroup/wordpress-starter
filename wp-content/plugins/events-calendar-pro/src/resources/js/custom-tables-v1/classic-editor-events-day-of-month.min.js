/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

window.tec=window.tec||{},tec.classicEditorEvents=tec.classicEditorEvents||{},tec.classicEditorEvents.dayOfMonth=tec.classicEditorEvents.dayOfMonth||{},function($,obj){"use strict";obj.selectors={monthDayDropdown:'.custom-recurrence-months select[data-field="custom-month-day"]',monthNumberDropdown:'.custom-recurrence-months select[data-field="custom-month-number"]',monthOnTheDropdown:".tec-events-pro-month-on-the-dropdown",monthSameDayDropdown:".custom-recurrence-months .tribe-same-day-select",yearMonthDayDropdown:'[data-condition="Yearly"] select[data-field="custom-year-month-day"]',yearMonthNumberDropdown:'[data-condition="Yearly"] select[data-field="custom-year-month-number"]',yearNotSameDayDropdown:".tec-events-pro-year-not-same-day-dropdown",yearSameDayDropdown:'[data-condition="Yearly"] .tribe-dame-day-select .tribe-same-day-select'},obj.typedSelectors={dayDropdown:"",numberDropdown:"",sameDayDropdown:"",combinedDropdown:""},obj.setTypedSelectors=function(ruleType){switch(ruleType){case"Monthly":obj.typedSelectors.dayDropdown=obj.selectors.monthDayDropdown,obj.typedSelectors.numberDropdown=obj.selectors.monthNumberDropdown,obj.typedSelectors.sameDayDropdown=obj.selectors.monthSameDayDropdown,obj.typedSelectors.combinedDropdown=obj.selectors.monthOnTheDropdown;break;case"Yearly":obj.typedSelectors.dayDropdown=obj.selectors.yearMonthDayDropdown,obj.typedSelectors.numberDropdown=obj.selectors.yearMonthNumberDropdown,obj.typedSelectors.sameDayDropdown=obj.selectors.yearSameDayDropdown,obj.typedSelectors.combinedDropdown=obj.selectors.yearNotSameDayDropdown;break;default:obj.typedSelectors.dayDropdown="",obj.typedSelectors.numberDropdown="",obj.typedSelectors.sameDayDropdown="",obj.typedSelectors.combinedDropdown=""}},obj.setTypedSelectorsFromRuleType=function(ruleType){obj.setTypedSelectors(ruleType);return["Monthly","Yearly"].includes(ruleType)},obj.isDateDropdownMatchEventStart=function(row){const valueArr=row.querySelector(obj.typedSelectors.combinedDropdown).value.split("-");if(1===valueArr.length){const date=tec.classicEditorEvents.eventDate.eventStart.moment.date();return valueArr[0]===String(date)}if(2===valueArr.length){const weekday=tec.classicEditorEvents.eventDate.eventStart.moment.isoWeekday(),ordinal=tec.classicEditorEvents.eventDate.getEventStartWeekdayOrdinalValue(),isLastWeekday=tec.classicEditorEvents.eventDate.isEventStartWeekdayLast(),isLastDay=tec.classicEditorEvents.eventDate.isEventStartDateLastOfMonth(),ordinalMatches=valueArr[0]===ordinal||(isLastWeekday||isLastDay)&&"Last"===valueArr[0],weekdayMatches=valueArr[1]===String(weekday)||isLastDay&&"8"===valueArr[1];return ordinalMatches&&weekdayMatches}return!1},obj.isDateDropdownMatchNumberAndDayDropdowns=function(row){const dropdown=row.querySelector(obj.typedSelectors.combinedDropdown),numberDropdown=row.querySelector(obj.typedSelectors.numberDropdown),dayDropdown=row.querySelector(obj.typedSelectors.dayDropdown),valueArr=dropdown.value.split("-");if(!valueArr.length)return!1;return!(valueArr[0]!==numberDropdown.value)&&(!valueArr[1]||valueArr[1]===dayDropdown.value)},obj.setDateDropdownValue=function($dropdown,optionType){const isInitialSync=!moment.isMoment(tec.classicEditorEvents.eventDate.eventStart.prevMoment);let value;const dropdownEl=$dropdown[0],defaultValue=dropdownEl.childNodes[0].value;if(optionType&&!isInitialSync){const optionTypePos=Array.from(dropdownEl.childNodes).map((option=>obj.getMonthlyOnOptionTypeFromValue(option.value))).indexOf(optionType);value=optionTypePos>=0?dropdownEl.childNodes[optionTypePos].value:defaultValue}if(isInitialSync){const number=$(obj.typedSelectors.numberDropdown).val();if(isNaN(number)){value=[number,$(obj.typedSelectors.dayDropdown).val()].join("-")}else value=number}$dropdown.val(value||defaultValue)},obj.getMonthlyOnOptionTypeFromValue=function(value){return value?value.match(/last-8/i)?"last-day-in-month":value.match(/(first|second|third|fourth|fifth)-\d/i)?"day-of-week-in-month":value.match(/last-\d/i)?"last-day-of-week-in-month":"day-n":null},obj.syncDateDropdownOptions=function(row){const dropdown=row.querySelector(obj.typedSelectors.combinedDropdown),optionType=obj.getMonthlyOnOptionTypeFromValue(dropdown.value);for(;dropdown.firstChild;)dropdown.removeChild(dropdown.lastChild);const $dropdown=$(dropdown),ordinal=tec.classicEditorEvents.eventDate.getEventStartWeekdayOrdinalValue(),weekdayName=tec.classicEditorEvents.eventDate.getEventStartWeekdayName(),patternKey=ordinal.toLowerCase()+weekdayName,patternObj=tribe_events_pro_recurrence_strings.customTablesV1.dayOfMonth.pattern[patternKey],patternOption=new Option(patternObj.label,patternObj.ordinal+"-"+patternObj.day,!1,!0);if($dropdown.append(patternOption),tec.classicEditorEvents.eventDate.isEventStartWeekdayLast()){const wasLastWeekdayOfTheMonth="Last"===row.querySelector('select[data-field="custom-month-number"]').value,lastWeekdayPatternKey="last"+weekdayName,lastWeekdayPatternObj=tribe_events_pro_recurrence_strings.customTablesV1.dayOfMonth.pattern[lastWeekdayPatternKey],lastWeekdayValue=lastWeekdayPatternObj.ordinal+"-"+lastWeekdayPatternObj.day,lastWeekdayPatternOption=new Option(lastWeekdayPatternObj.label,lastWeekdayValue,!1,wasLastWeekdayOfTheMonth);$dropdown.append(lastWeekdayPatternOption)}if(tec.classicEditorEvents.eventDate.isEventStartDateLastOfMonth()){const lastDayPatternKey="lastDay",lastDayPatternObj=tribe_events_pro_recurrence_strings.customTablesV1.dayOfMonth.pattern[lastDayPatternKey],lastDayPatternOption=new Option(lastDayPatternObj.label,lastDayPatternObj.ordinal+"-"+lastDayPatternObj.day,!1,!1);$dropdown.append(lastDayPatternOption)}const wasDayOfMonth=$.isNumeric(row.querySelector('select[data-field="custom-month-number"]').value),date=tec.classicEditorEvents.eventDate.eventStart.moment.date(),label=tribe_events_pro_recurrence_strings.customTablesV1.dayOfMonth.date[date],dateOption=new Option(label,date,!1,wasDayOfMonth);$dropdown.append(dateOption),obj.setDateDropdownValue($dropdown,optionType),$dropdown.tribe_dropdowns().trigger("change")},obj.syncDateDropdown=function(row,ruleType){if(tec.classicEditorEvents.offStart.isRuleOffStart(row))return;if(tecEventDetails.isRdate)return;if(!obj.setTypedSelectorsFromRuleType(ruleType))return;const $row=$(row);"yes"===$row.find(obj.typedSelectors.sameDayDropdown).val()&&$row.find(obj.typedSelectors.sameDayDropdown).val("no").trigger("change");const isInitialSync=!moment.isMoment(tec.classicEditorEvents.eventDate.eventStart.prevMoment),isSameDay=moment.isMoment(tec.classicEditorEvents.eventDate.eventStart.moment)&&moment.isMoment(tec.classicEditorEvents.eventDate.eventStart.prevMoment)&&tec.classicEditorEvents.eventDate.eventStart.moment.isSame(tec.classicEditorEvents.eventDate.eventStart.prevMoment,"day"),dropdownMatchesEventStart=obj.isDateDropdownMatchEventStart(row);!isInitialSync&&isSameDay&&dropdownMatchesEventStart?obj.isDateDropdownMatchNumberAndDayDropdowns(row)||$row.find(obj.typedSelectors.combinedDropdown).trigger("change"):obj.syncDateDropdownOptions(row)},obj.handleDropdownChange=function(event){const valueArr=event.target.value.split("-"),$row=$(event.data.row),ruleType=$row.attr("data-recurrence-type");if(!obj.setTypedSelectorsFromRuleType(ruleType))return;const $numberDropdown=$row.find(obj.typedSelectors.numberDropdown),$dayDropdown=$row.find(obj.typedSelectors.dayDropdown);valueArr.length&&valueArr[0]&&($numberDropdown.val(valueArr[0]).trigger("change"),valueArr[1]&&$dayDropdown.val(valueArr[1]).trigger("change"))},obj.bindRuleEvents=function(rows){rows.forEach((function(row){const $row=$(row);$row.find(obj.selectors.monthOnTheDropdown).on("change",{row:row},obj.handleDropdownChange),$row.find(obj.selectors.yearNotSameDayDropdown).on("change",{row:row},obj.handleDropdownChange)}))}}(jQuery,tec.classicEditorEvents.dayOfMonth);