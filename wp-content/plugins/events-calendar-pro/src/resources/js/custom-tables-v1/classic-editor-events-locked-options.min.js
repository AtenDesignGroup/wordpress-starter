/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

window.tec=window.tec||{},tec.classicEditorEvents=tec.classicEditorEvents||{},tec.classicEditorEvents.lockedOptions=tec.classicEditorEvents.lockedOptions||{},function($,obj){"use strict";obj.selectors={eventStartDate:"#EventStartDate",recurrenceWeekDay:".custom-recurrence-weeks .tribe-button-field",recurrenceWeekDayInput:".custom-recurrence-weeks .tribe-button-field .tribe-button-input",recurrenceYearsDropdown:".custom-recurrence-years",weekDaysLock:".tec-events-pro-week-days-lock",weekDaysOverlay:".tec-events-pro-week-days-overlay"},obj.classes={weekDayActive:"tribe-active",weekDayLocked:"tribe-button-field--locked"},obj.setWeekDayActiveFromLockedState=function(row){const lockedWeekDay=row.getAttribute("data-locked-week-day");if(!lockedWeekDay)return;const lockedDay=row.querySelector(obj.selectors.recurrenceWeekDayInput+'[value="'+lockedWeekDay+'"]').parentNode,hasLockClass=lockedDay.classList.contains(obj.classes.weekDayLocked),hasActiveClass=lockedDay.classList.contains(obj.classes.weekDayActive);hasLockClass&&hasActiveClass||!hasLockClass&&!hasActiveClass||lockedDay.click()},obj.setWeekDayLockState=function(day,lock){const hasLockClass=day.classList.contains(obj.classes.weekDayLocked);if(hasLockClass&&lock||!hasLockClass&&!lock)return;const hasActiveClass=day.classList.contains(obj.classes.weekDayActive);lock&&!hasLockClass?(day.classList.add(obj.classes.weekDayLocked),hasActiveClass||day.click()):!lock&&hasLockClass&&(day.classList.remove(obj.classes.weekDayLocked),hasActiveClass&&day.click())},obj.setLockedWeekDay=function(row){const overlay=row.querySelector(obj.selectors.weekDaysOverlay);if(tecEventDetails?.isRdate)return;if(tec.classicEditorEvents.offStart.isRuleOffStart(row))return row.querySelectorAll(obj.selectors.recurrenceWeekDayInput).forEach((function(dayInput){obj.setWeekDayLockState(dayInput.parentNode,!1)})),row.removeAttribute("data-locked-week-day"),void overlay.removeAttribute("style");const lockedWeekDay=row.getAttribute("data-locked-week-day"),startWeekDay=tec.classicEditorEvents.eventDate.eventStart.moment.isoWeekday();if(lockedWeekDay===startWeekDay)return;const lockedDay=row.querySelector(obj.selectors.recurrenceWeekDayInput+'[value="'+startWeekDay+'"]').parentNode,lockedDayLeft=lockedDay.offsetLeft,lockedDayWidth=lockedDay.offsetWidth;if(lockedDayLeft&&lockedDayWidth){overlay.style.left=lockedDayLeft+"px",overlay.style.width=lockedDayWidth+"px";const lockIconLeft=lockedDayLeft+lockedDayWidth-14;row.querySelector(obj.selectors.weekDaysLock).style.left=lockIconLeft+"px"}row.querySelectorAll(obj.selectors.recurrenceWeekDayInput).forEach((function(dayInput){const lock=dayInput.getAttribute("value")===String(startWeekDay);obj.setWeekDayLockState(dayInput.parentNode,lock)})),row.setAttribute("data-locked-week-day",startWeekDay)},obj.hideMonthInlineText=function(row){tec.classicEditorEvents.offStart.isRuleOffStart(row)||(row.querySelectorAll(".custom-recurrence-months > .tribe-field-inline-text:not(:first-child):not(:last-child):not(.first-label-in-line)").forEach((function(inlineText){inlineText.style.display="none"})),row.querySelector(".custom-recurrence-months .recurrence-month-on-the > .tribe-field-inline-text").style.display="none")},obj.setLockedYearMonthIcon=function(row){if(tec.classicEditorEvents.offStart.isRuleOffStart(row))return;const values=$(row).find(obj.selectors.recurrenceYearsDropdown).val(),month=String(tec.classicEditorEvents.eventDate.eventStart.moment.month()+1),index=values.indexOf(month);if(-1===index)return;const lockedChoice=row.querySelectorAll(obj.selectors.recurrenceYearsDropdown+" + .select2 .select2-selection__choice")[index];if(lockedChoice.classList.contains("select2-selection__choice--locked")||lockedChoice.classList.add("select2-selection__choice--locked"),!lockedChoice.querySelector(".tec-events-pro-month-lock")){const icon=document.createElement("span");icon.classList.add("tec-events-pro-month-lock"),icon.classList.add("dashicons"),icon.classList.add("dashicons-lock"),icon.title=tribe_events_pro_recurrence_strings.customTablesV1.recurrence.lockIconTooltip,lockedChoice.appendChild(icon)}},obj.setLockedYearMonth=function(row){if(tec.classicEditorEvents.offStart.isRuleOffStart(row))return;const $dropdown=$(row).find(obj.selectors.recurrenceYearsDropdown),values=$dropdown.val(),newValues=values.slice(),month=String(tec.classicEditorEvents.eventDate.eventStart.moment.month()+1);if(tec.classicEditorEvents.eventDate.didEventStartMonthChange()){const prevMonth=String(tec.classicEditorEvents.eventDate.eventStart.prevMoment.month()+1),index=newValues.indexOf(prevMonth);-1!==index&&newValues.splice(index,1)}newValues.includes(month)||newValues.push(month);newValues.every((function(value,index){return value===values[index]}))||$dropdown.val(newValues).trigger("change")},obj.hideYearlyInlineText=function(row){tec.classicEditorEvents.offStart.isRuleOffStart(row)||row.querySelectorAll('[data-condition="Yearly"] .tribe-dame-day-select > span > .tribe-field-inline-text').forEach((function(inlineText){inlineText.style.display="none"}))},obj.syncLockedOptionsRuleState=function(type){document.querySelectorAll(".tribe-event-"+type).forEach((function(row){const ruleType=row.getAttribute("data-recurrence-type");if(["Weekly","Monthly","Yearly"].includes(ruleType))switch(ruleType){case"Weekly":obj.setLockedWeekDay(row),obj.setWeekDayActiveFromLockedState(row);break;case"Monthly":obj.hideMonthInlineText(row),tec.classicEditorEvents.dayOfMonth.syncDateDropdown(row,ruleType);break;case"Yearly":obj.hideYearlyInlineText(row),obj.setLockedYearMonth(row),obj.setLockedYearMonthIcon(row),tec.classicEditorEvents.dayOfMonth.syncDateDropdown(row,ruleType)}}))}}(jQuery,tec.classicEditorEvents.lockedOptions);