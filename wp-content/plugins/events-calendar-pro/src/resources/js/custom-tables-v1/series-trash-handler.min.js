/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

tribe.events=tribe.events||{},tribe.events.pro=tribe.events.pro||{},tribe.events.pro.admin=tribe.events.pro.admin||{},tribe.events.pro.admin.series=tribe.events.pro.admin.series||{},tribe.events.pro.admin.series.trashHandler={},(($,obj)=>{"use strict";obj.selectors={dialogElement:"#tec-events-pro-series-trash-dialog"},obj.dialogElement=()=>{const $dialogElement=$(obj.selectors.dialogElement);if($dialogElement.length)return $dialogElement;$("body").append('<div id="tec-events-pro-series-trash-dialog"></div>');return $("head").append('\n\t\t\t<style>\n\t\t\t.ui-dialog[aria-describedby="tec-events-pro-series-trash-dialog"] {\n\t\t\t\tbackground:#f1f1f1;\n\t\t\t}\n\n\t\t\t.ui-dialog[aria-describedby="tec-events-pro-series-trash-dialog"] .ui-dialog-titlebar-close {\n\t\t\t\ttop: 1em;\n\t\t\t\tpadding-top:.5em\n\t\t\t}\n\t\t\t</style>\n\t\t'),$(obj.selectors.dialogElement)},obj.findPostId=node=>{const postIDElement=document.getElementById("post_ID");if(null!==postIDElement)return parseInt(postIDElement.value)||0;const parent=$(node).closest(".level-0");if(0===parent.length)return 0;const idAttribute=parent[0].getAttribute("id");return idAttribute?parseInt(idAttribute.replace("post-","")):0},obj.getCheckedListCheckboxes=()=>Array.from(document.querySelectorAll('input[type="checkbox"][name="post[]"]:checked')),obj.getTotalRelatedRecurringEvents=postId=>{const totalElement=document.getElementById(`series-occurrences-count-${postId}`);if(null===totalElement)return 0;const related=parseInt(totalElement.getAttribute("data-recurring-events-count"),10);return isNaN(related)?0:related},obj.currentBulkAction=e=>{const bulkActionSelect=$(e.target).closest(".bulkactions").find('[name="action"]').first();return 1!==bulkActionSelect.length?null:bulkActionSelect[0].value},obj.findPostEditLink=postId=>{const anchorElement=document.querySelector(`#post-${postId} .title a.row-title`);if(null===anchorElement)return null;const clone=anchorElement.cloneNode(!0);return clone.setAttribute("target","_blank"),clone},obj.getCheckedListPostIds=(minRelated=0)=>obj.getCheckedListCheckboxes().reduce(((carry,checkboxElement)=>{const postId=obj.findPostId(checkboxElement);return obj.getTotalRelatedRecurringEvents(postId)>=minRelated&&carry.push(postId),carry}),[]),obj.getEditListHtml=(postIds=[])=>{let html="<p><ul>";return postIds.map((postId=>{const postLink=obj.findPostEditLink(postId).outerHTML;html+=`<li>${postLink}</li>`})),html+="</ul></p>",html},obj.displayModal=(seriesCount,action)=>event=>{action=-1===["trash","delete"].indexOf(action)?"trash":action;const{tecEventsProSeriesTrashHandler:tecEventsProSeriesTrashHandler={}}=window,{messages:messages={},dialog:dialog={}}=tecEventsProSeriesTrashHandler,message=seriesCount>1?messages[action].plural:messages[action].singular,$element=obj.dialogElement();let html="<p>"+message+"</p>";seriesCount>1&&(html+=obj.getEditListHtml(obj.getCheckedListPostIds(1))),$element.html(html),event.preventDefault(),event.stopPropagation();const settings={autoOpen:!0,modal:!0,width:"400px",closeOnEscape:!0,closeText:"X",create:createEvent=>{$(createEvent.target).closest(".ui-dialog").find(".ui-dialog-titlebar-close").attr("title",dialog.closeButtonTooltip)},buttons:[{text:dialog.okButtonLabel,click:()=>{$element.dialog("close")}}]};$element.dialog(settings)},obj.listenForTrashClicks=()=>{const displayTrashModalFor1=obj.displayModal(1,"trash"),displayDeleteModalFor1=obj.displayModal(1,"delete");Array.from(document.querySelectorAll('.trash a.submitdelete, #delete-action a.submitdelete[href*="action=trash"]')).map((trashLink=>{const postId=obj.findPostId(trashLink);0===postId||obj.getTotalRelatedRecurringEvents(postId)<1||trashLink.addEventListener("click",displayTrashModalFor1)})),Array.from(document.querySelectorAll('.delete a.submitdelete, #delete-action a.submitdelete[href*="action=delete"]')).map((deleteLink=>{const postId=obj.findPostId(deleteLink);0===postId||obj.getTotalRelatedRecurringEvents(postId)<1||deleteLink.addEventListener("click",displayDeleteModalFor1)}))},obj.listenForBulkTrashClicks=()=>{const firstApplyButton=document.getElementById("doaction");if(null===firstApplyButton)return;const secondApplyButton=document.getElementById("doaction2"),clickHandler=event=>{const action=obj.currentBulkAction(event);if("trash"!==action&&"delete"!==action)return;obj.getCheckedListCheckboxes().filter((checkboxElement=>{const postId=obj.findPostId(checkboxElement);return obj.getTotalRelatedRecurringEvents(postId)})).length<=0||obj.displayModal(2,action)(event)};Array.from([firstApplyButton,secondApplyButton]).map((applyButton=>{applyButton.addEventListener("click",clickHandler)}))},obj.hideEmptyTrashButton=()=>{const emptyTrashEl=document.getElementById("delete_all");emptyTrashEl instanceof Element&&(emptyTrashEl.style.display="none")},document.addEventListener("DOMContentLoaded",(()=>{obj.dialogElement(),obj.listenForTrashClicks(),obj.listenForBulkTrashClicks(),obj.hideEmptyTrashButton()}))})(jQuery,tribe.events.pro.admin.series.trashHandler);