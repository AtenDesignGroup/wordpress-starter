/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

window.tec=window.tec||{},tec.classicEditorEvents=tec.classicEditorEvents||{},function($,obj){"use strict";const $document=$(document);obj.selectors={postForm:"form#post",recurrenceActive:"#tribe-recurrence-active",addExclusion:"#tribe-add-exclusion",addRecurrence:"#tribe-add-recurrence",eventTable:"#EventInfo .eventtable, .tribe-section-datetime.eventForm",eventForm:".eventForm",eventStartDate:"#EventStartDate",eventEndDate:"#EventEndDate",eventStartTime:"#EventStartTime",eventEndTime:"#EventEndTime",allDayCheckbox:"#allDayCheckbox",saveButton:'input[name="save"]',publishButton:'input[name="publish"]',communityEventsSubmit:".events-community-submit",deleteButton:"#delete-action a.submitdelete",recurrence:".tribe-event-recurrence",exclusion:".tribe-event-exclusion",recurrenceDescription:".tribe-recurrence-description",recurrenceDescriptionInput:'[name="recurrence[description]"]',recurrenceTypeButton:".tribe-event-recurrence-rule > .tribe-buttonset .tribe-button-field[data-value]"},obj.setNewRecurrenceDefaults=function(){requestAnimationFrame((function(){const targetRows=document.querySelectorAll(obj.selectors.recurrence+":not([data-defaults-set])");obj.default.setRuleEndsText(targetRows),obj.default.setNewEndsOnDefault(targetRows),obj.default.setNewEndDateDefault(targetRows),obj.default.setNewEndCountDefault(targetRows),obj.default.setNewOnceTimeSelectDefault(targetRows),obj.default.setNewRuleType(targetRows),obj.default.addSameTimeRowClass(targetRows),obj.offStart.initNewRules(targetRows),obj.default.bindRuleEvents(targetRows),obj.dayOfMonth.bindRuleEvents(targetRows),obj.default.setDefaultsSetFlag(targetRows)}))},obj.setNewExclusionDefaults=function(){requestAnimationFrame((function(){const targetRows=document.querySelectorAll(obj.selectors.exclusion+":not([data-defaults-set])");obj.default.hideExclusionDescription(targetRows),obj.default.setExclusionDatepickerMinDates(targetRows),obj.default.setNewEndsOnDefault(targetRows),obj.default.setRuleEndsText(targetRows),obj.default.setNewEndCountDefault(targetRows),obj.default.setNewRuleType(targetRows),obj.offStart.initNewRules(targetRows),obj.default.bindRuleEvents(targetRows),obj.dayOfMonth.bindRuleEvents(targetRows),obj.default.setDefaultsSetFlag(targetRows)}))},obj.setAllExclusionDatepickerMinDates=function(){requestAnimationFrame((function(){const targetRows=document.querySelectorAll(obj.selectors.exclusion);obj.default.setExclusionDatepickerMinDates(targetRows)}))},obj.initExistingRecurrenceExclusionRows=function(){tec.classicEditorEvents.eventDate.setCurrentEventDate();const recurrenceRows=document.querySelectorAll(obj.selectors.recurrence+":not([data-defaults-set])"),exclusionRows=document.querySelectorAll(obj.selectors.exclusion+":not([data-defaults-set])");obj.default.hideExclusionDescription(exclusionRows),obj.default.setRuleEndsText(recurrenceRows),obj.default.setRuleEndsText(exclusionRows),obj.default.setExclusionDatepickerMinDates(exclusionRows),obj.default.addSameTimeRowClass(recurrenceRows),obj.offStart.initOffStartRules(recurrenceRows),obj.default.setRuleTypeDropdownToMatchButtons(recurrenceRows),obj.default.setRuleTypeDropdownToMatchButtons(exclusionRows),obj.default.bindRuleEvents(recurrenceRows),obj.default.bindRuleEvents(exclusionRows),obj.default.setDefaultsSetFlag(recurrenceRows),obj.default.setDefaultsSetFlag(exclusionRows),obj.dayOfMonth.bindRuleEvents(recurrenceRows),obj.dayOfMonth.bindRuleEvents(exclusionRows),obj.sync.syncRecurrenceState(),tec.classicEditorEvents.eventDate.setPreviousEventDate()},obj.hideRecurrenceDescription=function(){document.querySelectorAll(obj.selectors.recurrenceDescription).forEach((function(description){description.style.display="none";const descriptionInput=description.querySelector(obj.selectors.recurrenceDescriptionInput);descriptionInput&&(descriptionInput.value="")}))},obj.handleMutations=function(mutations,observer){mutations.reduce((function(carry,mutation){return carry||("attributes"!==mutation.type||!("class"!==mutation.attributeName||!mutation.target.classList.contains("tribe-event-recurrence")&&!mutation.target.classList.contains("tribe-event-exclusion")))}),!1)&&requestAnimationFrame((function(){tec.classicEditorEvents.eventDate.setCurrentEventDate(),obj.sync.syncRecurrenceState(),tec.classicEditorEvents.eventDate.setPreviousEventDate()}))},obj.setupMutationObserver=function(){const eventInfo=document.querySelector(obj.selectors.eventTable);if(!eventInfo)return;new MutationObserver(obj.handleMutations).observe(eventInfo,{subtree:!0,childList:!0,attributes:!0})},obj.bindEvents=function(){$([obj.selectors.recurrenceActive,obj.selectors.addRecurrence].join()).on("click",obj.setNewRecurrenceDefaults),$(obj.selectors.addExclusion).on("click",obj.setNewExclusionDefaults),$(obj.selectors.eventForm).on("change",[obj.selectors.eventStartDate,obj.selectors.eventEndDate,obj.selectors.eventStartTime,obj.selectors.eventEndTime,obj.selectors.allDayCheckbox].join(),obj.setAllExclusionDatepickerMinDates),$(obj.selectors.postForm).on("submit",obj.offStart.enableOffStartFieldsForSubmission)},obj.updateRuleRecurrenceText=function($rule){let startMoment;if(obj.classicUpdateRuleRecurrenceText($rule),Array.isArray(tecEventDetails.occurrence)||!tecEventDetails.occurrence.has_recurrence||tecEventDetails.occurrence.isFirst){const dateFormat=tribe_events_pro_admin.recurrence.date_format+" hh:mm a",$startDate=$document.find(obj.selectors.eventStartDate),$startTime=$document.find(obj.selectors.eventStartTime),startDate=$startDate.val()+" "+$startTime.val().toUpperCase();startMoment=moment(startDate,dateFormat)}else startMoment=moment(tecEventDetails.event.start_date);const displayFormat=tribe_events_pro_admin.recurrence.convert_date_format_php_to_moment(tribe_dynamic_help_text.date_with_year),$recurrenceDescription=$rule.find(".tribe-event-recurrence-description");let updatedText=$recurrenceDescription.text().replace("[first_occurrence_date]",startMoment.format(displayFormat));updatedText=updatedText.replace("[first_occurrence_start_time]",startMoment.format("h:mma").toUpperCase()),$recurrenceDescription.html(updatedText)},obj.setupRecurrenceTextModification=function(){obj.classicUpdateRuleRecurrenceText=tribe_events_pro_admin.recurrence.update_rule_recurrence_text,tribe_events_pro_admin.recurrence.update_rule_recurrence_text=obj.updateRuleRecurrenceText,obj.date_format=tribe_events_pro_admin.recurrence.date_format,obj.convert_date_format_php_to_moment=tribe_events_pro_admin.recurrence.convert_date_format_php_to_moment},obj.ready=function(){const beforeReadyEvent=new Event("TECClassicEditorEventsBeforeReady");beforeReadyEvent.object=obj,document.dispatchEvent(beforeReadyEvent),$document.on("setup.dependency",(function(){obj.initExistingRecurrenceExclusionRows(),obj.hideRecurrenceDescription(),obj.setupMutationObserver(),obj.bindEvents();const readyEvent=new Event("TECClassicEditorEventsReady");readyEvent.object=obj,document.dispatchEvent(readyEvent)})),obj.setupRecurrenceTextModification()},$(obj.ready)}(jQuery,tec.classicEditorEvents);