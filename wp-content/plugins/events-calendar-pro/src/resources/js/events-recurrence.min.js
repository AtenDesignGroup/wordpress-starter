/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe_events_pro_admin=tribe_events_pro_admin||{};tribe_events_pro_admin.recurrence={recurrence_count:0,exclusion_count:0,event:{}},function($,my){"use strict";var $document=$(document);my.init=function(){this.init_recurrence()},my.init_recurrence=function(){this.$recurrence_staging=$("#tribe-recurrence-staging"),this.recurrence_tmpl=document.getElementById("tmpl-tribe-recurrence"),this.recurrence_tmpl&&(this.recurrence_template=Handlebars.compile(this.recurrence_tmpl.innerHTML),this.$add_recurrence=$("#tribe-add-recurrence"),this.$recurrence_rules=$(".tribe-event-recurrence-rule"),this.$recurrence_row=$(".recurrence-row.tribe-datetime-block").addClass("tribe-recurrence-exclusion-row--idle"),this.$exclusion_staging=$("#tribe-exclusion-staging"),this.exclusion_tmpl=document.getElementById("tmpl-tribe-exclusion"),this.exclusion_template=Handlebars.compile(this.exclusion_tmpl.innerHTML),this.$add_exclusion=$("#tribe-add-exclusion"),this.$exclusion_rules=$(".tribe-event-recurrence-exclusion"),this.recurrence_errors={days:[],end:[]},this.date_format=tribe_datepicker_opts.dateFormat.toUpperCase(),this.date_format=this.date_format.replace("YY","YYYY"),this.populate_recurrence(tribe_events_pro_recurrence_data),window.Handlebars.registerHelper({tribe_recurrence_select:function(value,options){var $el=$("<select />").html(options.fn(this));return value&&$el.find("option:selected").attr("selected",!1),Array.isArray(value)||(value=[value]),value.forEach((function(currentValue){$el.find('[value="'+currentValue+'"]').attr("selected","selected")})),$el.html()},tribe_if_in:function(value,collection,text){return void 0===collection&&(collection=[]),void 0===text&&(text=""),-1!==$.inArray(value,collection)?text:""},tribe_if_not_in:function(value,collection,text){return void 0===collection&&(collection=[]),void 0===text&&(text=""),-1===$.inArray(value,collection)?text:""},tribe_checked_if_is:function(value,goal){return value===goal?"checked":""},tribe_checked_if_is_not:function(value,goal){return value!==goal?"checked":""},tribe_checked_if_in:function(value,collection){return-1!==$.inArray(value,collection)?"checked":""}}))},my.attach_behaviors=function(){$(".eventForm").on("submit",".wp-admin.events-cal #post",this.event.submit_validation).on("change",'[data-field="type"]',this.event.recurrence_type_changed).on("change",'[data-field="end-type"]',this.event.recurrence_end_type_changed).on("change",'[data-field="custom-month-number"]',this.event.recurrence_custom_month_changed).on("change",'[data-field="same-time"]',this.event.same_time_changed).on("change",'[data-field="custom-week-day"]',this.event.weekdays_changed).on("change",".recurrence_end_count",this.event.recurrence_end_count_changed).on("change",".recurrence-row, .custom-recurrence-row",this.event.recurrence_row_changed).on("change","#EventStartDate, #EventEndDate, #allDayCheckbox, #EventStartTime, #EventEndTime",this.event.datepicker_updated).on("change","#EventStartTime, #EventEndTime, #allDayCheckbox",this.setup_same_time).on("change","#EventStartDate",this.setup_same_day).on("click","#tribe-add-recurrence",this.event.add_recurrence).on("click","#tribe-add-exclusion",this.event.add_exclusion).on("click",".tribe-event-recurrence .tribe-handle, .tribe-event-exclusion .tribe-handle",this.event.toggle_rule).on("click",".tribe-event-recurrence .tribe-confirm-delete-this, .tribe-event-exclusion .tribe-confirm-delete-this",this.event.delete_rule),$(document).on("click",".tribe-event-recurrence .tribe-delete-this, .tribe-event-exclusion .tribe-delete-this",this.event.delete_rule),$('input[data-field="is_recurring"][value="true"]').length&&($(".eventForm").on("change",".recurrence-row input, .custom-recurrence-row input, .recurrence-row select, .custom-recurrence-row select",this.event.recurrence_changed),$(".eventForm").on("recurrenceEndChanged",'[data-field="end"]',this.event.recurrence_changed)),$('[data-field="end"]').datepicker("option","onSelect",this.event.datepicker_end_date_changed),$(".recurrence_end, #EventStartDate, #EventEndDate").datepicker("option","onClose",this.event.datepicker_updated),this.set_recurrence_end_min_date(),this.init_buttonset()},my.init_dropdowns=function(){$(".recurrence-row .tribe-dropdown").not(".tribe-dropdown-created").tribe_dropdowns()},my.init_buttonset=function(){$(tribe_buttonset.selector.input).trigger("change.tribe_buttonset")},my.add_recurrence=function(data){var is_new=void 0===data;void 0!==data&&void 0!==data.end&&data.end&&(data.end=moment(data.end).format(this.date_format));try{data.custom.date.date&&(data.custom.date.date=moment(data.custom.date.date).format(this.date_format))}catch(e){}this.$recurrence_staging.append(this.recurrence_template(data));var $rule=this.$recurrence_staging.find(".tribe-event-recurrence");is_new&&$rule.addClass("recurrence-new-rule"),$rule.find('[name*="recurrence[rules][]"],[id*="recurrence_rule_--"],[data-input*="recurrence_rule_--"],[data-depends*="#recurrence_rule_--"]').each((function(){var $field=$(this);$field.attr("name")&&$field.attr("name",$field.attr("name").replace(/recurrence\[rules\]\[\]/,"recurrence[rules]["+my.recurrence_count+"]")),$field.attr("id")&&$field.attr("id",$field.attr("id").replace(/recurrence_rule_--/,"recurrence_rule_"+my.recurrence_count)),$field.attr("data-input")&&$field.attr("data-input",$field.attr("data-input").replace(/recurrence_rule_--/,"recurrence_rule_"+my.recurrence_count)).data("input",$field.attr("data-input")),$field.attr("data-depends")&&$field.attr("data-depends",$field.attr("data-depends").replace(/#recurrence_rule_--/,"#recurrence_rule_"+my.recurrence_count))})),data||$rule.find(".tribe-same-time-checkbox").prop("checked",!0),$rule.find(".tribe-datepicker").datepicker(tribe_datepicker_opts),$rule.insertBefore(this.$recurrence_staging),this.set_recurrence_end_min_date(),this.set_recurrence_data_attributes($rule),this.maybe_relocate_end_date($rule),this.adjust_rule_helper_text($rule),this.update_rule_recurrence_text($rule),this.$recurrence_rules=this.$recurrence_rules.add($rule),this.recurrence_count++,this.check_for_useful_rule(),this.setup_intervals($rule),this.setup_same_time(),this.setup_same_day(),this.setup_yearly_select($rule),this.setup_weekly_select($rule),this.init_dropdowns(),void 0===data&&this.toggle_rule($rule),$("#tribe-recurrence-active.inactive").trigger("click").prop("checked",!0).removeClass("inactive"),$document.trigger("verify.dependency")},my.setup_weekly_select=function($rule){var start_date=$(document.getElementById("EventStartDate")).val(),default_day_of_week=moment(start_date,this.date_format).isoWeekday();$rule.find('[data-field="custom-week-day"]').filter(":checked").length>0||$rule.find('[data-field="custom-week-day"][value="'+default_day_of_week+'"]').each((function(){$(this).parent().trigger("click")}))},my.setup_yearly_select=function($rule){var $start_date=$(document.getElementById("EventStartDate")),format=tribe_dynamic_help_text.datepicker_format;format=format.replace("m","MM").replace("d","DD").replace("Y","YYYY");var start_month=moment($start_date.val(),format).format("M"),$select=$rule.find('[data-field="custom-year-month"]');$select.val()||$select.val(start_month)},my.setup_intervals=function($rule){var type=$rule.find('[data-field="type"]').val(),$interval=$rule.find(".tribe-recurrence-rule-interval"),interval=$interval.get(0);if(!interval.created){var i=1,num=6,autocomplete_options=[];for("Daily"===type||"Weekly"===type?num=6:"Monthly"===type?num=12:"Yearly"===type&&(num=3),i=1;i<=num;i++)autocomplete_options.push({id:i,text:""+i});$interval.select2TEC().select2("destroy").removeClass("select2-offscreen").data("options",autocomplete_options),interval.created=!0}},my.setup_same_day=function(){$(".tribe-event-recurrence, .tribe-event-exclusion").each((function(){var $same_day_text=$(this).find(".recurrence-same-day-text"),$start_date=$(document.getElementById("EventStartDate")),format=my.convert_date_format_php_to_moment(tribe_dynamic_help_text.datepicker_format),start_day=moment($start_date.val(),format).format("D");$same_day_text.html(tribe_events_pro_recurrence_strings.recurrence["same-day-month-"+start_day])}))},my.setup_same_time=function(){$(".tribe-event-recurrence, .tribe-event-exclusion").each((function(){var $rule=$(this),$same_time_text=$rule.find(".recurrence-same-time-text"),same_time_text="";if($("#allDayCheckbox:checked").length)same_time_text=tribe_events_pro_recurrence_strings.recurrence["same-time-text-same-all-day"];else{var $start_time=$(document.getElementById("EventStartTime")),$end_time=$(document.getElementById("EventEndTime"));same_time_text=tribe_events_pro_recurrence_strings.recurrence["same-time-text-same"].replace("%1$s",$start_time.val()).replace("%2$s",$end_time.val())}$same_time_text.html(same_time_text);var $timepickers=$rule.find(".tribe-timepicker:not(.ui-timepicker-input)");tribe_timepickers.setup_timepickers($timepickers)}))},my.maybe_relocate_end_date=function($rule){var $custom_container=$rule.find(".recurrence-custom-container"),$end_container=$rule.find(".recurrence-end-container"),$end=$rule.find(".recurrence_end");"Date"===$rule.find('[data-field="type"]').data("value")?$custom_container.append($end):$end_container.append($end)},my.check_for_useful_rule=function(){var $rule=this.$recurrence_rules.filter(":first"),rule_set=!1;this.$recurrence_rules.find('[data-field="type"]').each((function(){"None"!==$(this).data("value")&&(rule_set=!0)})),rule_set?$rule.closest("table").addClass("tribe-has-recurrence-rule"):$rule.closest("table").removeClass("tribe-has-recurrence-rule")},my.add_exclusion=function(data){var is_new=void 0===data;if(void 0!==data&&void 0!==data.end&&data.end){var date_format=tribe_datepicker_opts.dateFormat.toUpperCase().replace("YY","YYYY");data.end=moment(data.end).format(date_format)}this.$exclusion_staging.append(this.exclusion_template(data));var $rule=this.$exclusion_staging.find(".tribe-event-exclusion");is_new&&$rule.addClass("exclusion-new-rule"),$rule.find('[name*="recurrence[exclusions][]"],[id*="exclusion_rule_--"],[data-input*="exclusion_rule_--"],[data-depends*="#exclusion_rule_--"]').each((function(){var $field=$(this);$field.attr("name")&&$field.attr("name",$field.attr("name").replace(/recurrence\[exclusions\]\[\]/,"recurrence[exclusions]["+my.exclusion_count+"]")),$field.attr("id")&&$field.attr("id",$field.attr("id").replace(/exclusion_rule_--/,"exclusion_rule_"+my.exclusion_count)),$field.attr("data-input")&&$field.attr("data-input",$field.attr("data-input").replace(/exclusion_rule_--/,"exclusion_rule_"+my.exclusion_count)).data("input",$field.attr("data-input")),$field.attr("data-depends")&&$field.attr("data-depends",$field.attr("data-depends").replace(/#exclusion_rule_--/,"#exclusion_rule_"+my.exclusion_count))})),data||$rule.find(".tribe-same-time-checkbox").prop("checked",!0),$rule.find(".tribe-datepicker").datepicker(tribe_datepicker_opts),$rule.insertBefore(this.$exclusion_staging),this.set_recurrence_end_min_date(),this.set_recurrence_data_attributes($rule),this.maybe_relocate_end_date($rule),this.adjust_rule_helper_text($rule),this.update_rule_recurrence_text($rule),this.$exclusion_rules=this.$exclusion_rules.add($rule),this.exclusion_count++,this.check_for_useful_rule(),this.setup_intervals($rule),this.setup_same_time(),this.setup_same_day(),this.setup_yearly_select($rule),this.setup_weekly_select($rule),this.init_dropdowns(),void 0===data&&this.toggle_rule($rule)},my.populate_recurrence=function(data){my.operations_completed=0,my.total_operations=0,void 0!==data.rules&&data.rules.length?(my.total_operations=1,my.async_operation((function(item,next){my.add_recurrence(item),next()}),data.rules,(function(){my.operations_completed+=1,my.populate_completed()})),void 0!==data.exclusions&&data.exclusions.length&&(my.total_operations+=1,my.async_operation((function(item,next){my.add_exclusion(item),next()}),data.exclusions,(function(){my.operations_completed+=1,my.populate_completed()})))):my.populate_completed()},my.populate_completed=function(){my.operations_completed===my.total_operations&&setTimeout((function(){my.attach_behaviors(),$document.trigger("setup.dependency"),my.$recurrence_row.removeClass("tribe-recurrence-exclusion-row--idle")}))},my.async_operation=function(callback,collection,done,index){var i=index||0;i>=collection.length?setTimeout(done):setTimeout((function(){callback(collection[i],(function(){my.async_operation(callback,collection,done,i+1)}))}))},my.adjust_rule_helper_text=function($rule){var $custom_type_option=$rule.find('[data-field="custom-type"] option:selected');$rule.find(".recurrence-interval-type").text($custom_type_option.data("plural")),$rule.find('[data-field="custom-type-text"]').val($custom_type_option.data("plural"))},my.set_recurrence_data_attributes=function($rules){($rules||this.$recurrence_rules).each((function(){var $rule=$(this),$field=null,fields=["is_recurring","type","end-type","custom-type","custom-month-number"];for(var i in fields)$field=$rule.find('[data-field="'+fields[i]+'"]'),"custom-month-number"===fields[i]?$rule.attr("data-recurrence-"+fields[i],isNaN($field.val())?"string":"numeric"):"custom-month-number"===fields[i]?$rule.attr("data-recurrence-"+fields[i],$field.is(":checked")?"yes":"no"):$rule.attr("data-recurrence-"+fields[i],$field.val());var type=null;switch($rule.find('[data-field="custom-type"]').val()){case"Weekly":type="week";break;case"Monthly":type="month";break;case"Yearly":type="year";break;default:type="day"}var $same_time=$rule.find('[data-field="custom-'+type+'-same-time"]');$rule.attr("data-recurrence-same-time",$same_time.filter(":checked").length?"yes":"no")}))},my.set_recurrence_end_min_date=function(){var start=$("#EventStartDate").val();""!==start&&$(".recurrence_end").attr("placeholder",start).datepicker("option","minDate",start)},my.has_valid_recurrence_days=function(){var valid=!0;return this.$recurrence_rules.each((function(index){my.has_valid_recurrence_days_for_rule($(this))||(valid=!1,my.recurrence_errors.days.push(index))})),valid},my.has_valid_recurrence_days_for_rule=function($recurrence_rule){var $interval=$recurrence_rule.find('[data-field="custom-interval"]'),$recurrence_type=$recurrence_rule.find('[data-field="type"]');return $interval.val()===parseInt($interval.val(),10)||"Custom"!==$recurrence_type.val()},my.has_valid_recurrence_ends=function(){var valid=!0;return this.$recurrence_rules.each((function(index){my.has_valid_recurrence_end_for_rule($(this))||(valid=!1,my.recurrence_errors.end.push(index))})),valid},my.has_valid_recurrence_end_for_rule=function($recurrence_rule){var $end=$recurrence_rule.find('[data-field="end"]'),$end_type=$recurrence_rule.find('[data-field="end-type"]');return"None"===$recurrence_rule.find('[data-field="type"]').val()||"On"!==$end_type.val()||$end.val()&&!$end.hasClass("placeholder")},my.reset_submit_button=function(){$("#publishing-action .button-primary-disabled").removeClass("button-primary-disabled"),$("#publishing-action .spinner").hide()},my.validate_recurrence=function(){var valid=!0;return this.has_valid_recurrence_days()||(valid=!1,alert($(".rec-days-error:first").text()),$(".rec-days-error").each((function(index){$.inArray(index,my.recurrence_errors.days)&&$(this).show()}))),this.has_valid_recurrence_ends()||(valid=!1,alert($(".rec-end-error:first").text()),$(".rec-end-error").each((function(index){$.inArray(index,my.recurrence_errors.end)&&$(this).show()}))),valid},my.toggle_rule=function($rule,state){"undefined"!==state&&state?"open"===state?$rule.addClass("tribe-open"):$rule.removeClass("tribe-open"):$rule.toggleClass("tribe-open")},my.update_recurrence_text=function(){this.$recurrence_rules.each((function(){my.update_rule_recurrence_text($(this))})),this.$exclusion_rules.each((function(){my.update_rule_recurrence_text($(this))}))},my.convert_date_format_php_to_moment=function(format){var replacements={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"};return format.split("").map((function(char){return char in replacements?replacements[char]:char})).join("")},my.update_rule_recurrence_text=function($rule){var type=$rule.find('[data-field="type"]').val(),end_type=$rule.find('[data-field="end-type"] option:selected').val(),end_count=$rule.find('[data-field="end-count"]').val(),same_time="yes"===$rule.find('[data-field="same-time"]').val(),interval=$rule.find('[data-field="custom-interval"]').val(),allday=$(document.getElementById("allDayCheckbox")).prop("checked");if(end_count||(end_count=0),type=type.toLowerCase().replace(" ","-"),end_type=end_type.toLowerCase().replace(" ","-"),"none"!==type&&""!==type){var date_format=this.date_format+" hh:mm a",start_date=$(document.getElementById("EventStartDate")).val(),start_time=$(document.getElementById("EventStartTime")).val().toUpperCase();start_date+=" "+start_time;var end_date=$(document.getElementById("EventEndDate")).val();end_date+=" "+$(document.getElementById("EventEndTime")).val().toUpperCase();var start_moment=moment(start_date,date_format),end_moment=moment(end_date,date_format),single_moment=start_moment,instance_start_time=same_time?start_time:$rule.find(".tribe-field-start_time").val(),days_of_week=null,month_names=null,month_day_description=tribe_events_pro_recurrence_strings.date.day_placeholder,day_number=start_moment.format("D"),key=type;if(allday&&!start_moment.isSame(end_moment,"day")?key+="-multi":allday&&same_time&&(key+="-allday"),"weekly"===type){var weekdays=[];$rule.find('[data-field="custom-week-day"]:checked').each((function(){weekdays.push(tribe_events_pro_recurrence_strings.date.weekdays[parseInt($(this).val(),10)-1])})),days_of_week=0===weekdays.length?tribe_events_pro_recurrence_strings.date.day_placeholder:2===weekdays.length?weekdays.join(" "+tribe_events_pro_recurrence_strings.date.collection_joiner+" "):(days_of_week=weekdays.join(", ")).replace(/(.*),/,"$1, "+tribe_events_pro_recurrence_strings.date.collection_joiner)}else if("monthly"===type){var same_day=$rule.find('[data-field="month-same-day"] option:selected').val(),month_number=$rule.find('[data-field="custom-month-number"] option:selected').val(),month_day=$rule.find('[data-field="custom-month-day"] option:selected').val();"yes"!==same_day&&isNaN(month_number)?(day_number=month_number,month_day_description=(month_day_description=tribe_events_pro_recurrence_strings.date[month_number.toLowerCase()+"_x"]).replace("%1$s",tribe_events_pro_recurrence_strings.date.weekdays[parseInt(month_day,10)-1])):(month_number=day_number,key+="-numeric")}else if("yearly"===type){same_day=$rule.find('[data-field="year-same-day"] option:selected').val(),month_number=$rule.find('[data-field="custom-year-month-number"]').val(),month_day=$rule.find('[data-field="custom-year-month-day"]').val();var months=[],month_values=$rule.find('[data-field="custom-year-month"]').val();month_values&&(_.isString(month_values)&&(month_values=month_values.split(",")),$.each(month_values,(function(i,month){months.push(tribe_events_pro_recurrence_strings.date.months[parseInt(month,10)-1])}))),month_names=0===months.length?tribe_events_pro_recurrence_strings.date.month_placeholder:2===months.length?months.join(" "+tribe_events_pro_recurrence_strings.date.collection_joiner+" "):(month_names=months.join(", ")).replace(/(.*),/,"$1, "+tribe_events_pro_recurrence_strings.date.collection_joiner),"yes"!==same_day&&isNaN(month_number)?(day_number=month_number,month_day_description=(month_day_description=tribe_events_pro_recurrence_strings.date[month_number.toLowerCase()+"_x"]).replace("%1$s",tribe_events_pro_recurrence_strings.date.weekdays[parseInt(month_day,10)-1])):(month_number=day_number,key+="-numeric")}else if("date"===type){var single_date=$rule.find("input.tribe-datepicker").val();if(!single_date)return void $rule.find(".tribe-event-recurrence-description").html("");single_moment=moment(single_date,date_format)}key+="date"===type?"-on":"after"===end_type?"-after":"never"===end_type?"-never":"-on",allday&&!same_time&&(key+="-at"),void 0===tribe_events_pro_recurrence_strings.recurrence[key]&&key.endsWith("-at")&&(key=key.replace(/-at$/,""));var text=tribe_events_pro_recurrence_strings.recurrence[key];if(void 0!==text){var end=$rule.find('[data-field="end"]').val();end||(end=$rule.find('[data-field="end"]').attr("placeholder")),moment.locale(document.documentElement.getAttribute("lang"));var series_end_moment=moment(end,date_format),display_format=this.convert_date_format_php_to_moment(tribe_dynamic_help_text.date_with_year);text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=(text=text.replace("[count]",end_count)).replace("[day_number]",day_number)).replace("[days_of_week]",days_of_week)).replace("[month_day_description]",month_day_description)).replace("[month_names]",month_names)).replace("[month_number]",month_number)).replace("[interval]",interval)).replace("[series_end_date]",series_end_moment.format(display_format))).replace("[start_date]",start_moment.format(display_format))).replace("[start_time]",instance_start_time)).replace("[single_date]",single_moment.format(display_format))).replace("1 day(s)",tribe_events_pro_recurrence_strings.date.time_spans.day)).replace("1 week(s)",tribe_events_pro_recurrence_strings.date.time_spans.week)).replace("1 month(s)",tribe_events_pro_recurrence_strings.date.time_spans.month)).replace("1 year(s)",tribe_events_pro_recurrence_strings.date.time_spans.year)).replace("day(s)",tribe_events_pro_recurrence_strings.date.time_spans.days)).replace("week(s)",tribe_events_pro_recurrence_strings.date.time_spans.weeks)).replace("month(s)",tribe_events_pro_recurrence_strings.date.time_spans.months)).replace("year(s)",tribe_events_pro_recurrence_strings.date.time_spans.years),$rule.find(".tribe-event-recurrence-description").html(text)}else $rule.find(".tribe-event-recurrence-description").html("")}else $rule.find(".tribe-event-recurrence-description").html("")},my.event.add_recurrence=function(e){e.preventDefault(),my.add_recurrence()},my.event.add_exclusion=function(e){e.preventDefault(),my.add_exclusion()},my.event.recurrence_type_changed=function(){var $el=$(this),$rule=$el.closest(".tribe-event-recurrence, .tribe-event-exclusion"),$count_text=$rule.find(".occurence-count-text"),end_count=parseInt($rule.find(".recurrence_end_count").val(),10),type_text=$el.data("plural");$rule.find(".recurrence_end_count").val(end_count),(isNaN(end_count)||0>=end_count)&&($rule.find(".recurrence_end_count").val(1),end_count=1),1===end_count&&(type_text=$el.data("single")),$count_text.text(type_text),$rule.find('[data-field="occurrence-count-text"]').val($count_text.text()),my.set_recurrence_data_attributes($rule),my.maybe_relocate_end_date($rule),my.check_for_useful_rule(),my.setup_intervals($rule),my.setup_yearly_select($rule),my.setup_weekly_select($rule),my.init_dropdowns(),$el.closest(".tribe-buttonset").parent().find(".tribe-dependent:not(.tribe-dependency)").dependency(),my.toggle_rule($rule,"open")},my.event.recurrence_end_type_changed=function(){var $rule=$(this).closest(".tribe-event-recurrence");my.set_recurrence_data_attributes($rule)},my.event.recurrence_changed=function(){var $rule=$(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");$rule.attr("data-recurrence-changed","yes"),my.toggle_rule($rule,"open")},my.event.recurrence_end_count_changed=function(){$(this).closest(".tribe-event-recurrence, .tribe-event-exclusion").find('[data-field="type"]').change()},my.event.recurrence_custom_month_changed=function(){var $rule=$(this).closest(".tribe-event-recurrence");my.set_recurrence_data_attributes($rule)},my.event.submit_validation=function(e){if(!tribe_events_pro_admin.validate_recurrence())return e.preventDefault(),e.stopPropagation(),my.reset_submit_button(),!1},my.event.datepicker_updated=function(){tribe_events_pro_admin.recurrence.update_recurrence_text(),tribe_events_pro_admin.recurrence.set_recurrence_end_min_date()},my.event.datepicker_end_date_changed=function(){$(this).removeClass("placeholder"),$(this).trigger("recurrence-end-changed.tribe")},my.event.recurrence_row_changed=function(){var $row=$(".recurrence-pattern-description-row");$row.is(":visible")||$row.show(),tribe_events_pro_admin.recurrence.update_recurrence_text()},my.event.same_time_changed=function(){var $rule=$(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");my.set_recurrence_data_attributes($rule)},my.event.weekdays_changed=function(){var $rule=$(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");my.set_recurrence_data_attributes($rule),my.update_rule_recurrence_text($rule)},my.event.toggle_rule=function(){var $el=$(this);my.toggle_rule($el.closest(".tribe-event-recurrence, .tribe-event-exclusion"))},my.event.delete_rule=function(event){event.preventDefault();var $rule=$(this).closest(".tribe-event-recurrence, .tribe-event-exclusion"),buttons={delete:{text:tribe_events_pro_recurrence_strings.recurrence["delete-confirm"],click:function(){$(this).dialog("close"),$rule.fadeOut(500,(function(){$rule.remove(),tribe_events_pro_admin.recurrence.update_recurrence_text()}))}},cancel:{text:tribe_events_pro_recurrence_strings.recurrence["delete-cancel"],click:function(){my.event.close_delete_confirmation_dialog($(this))}}},$dialog=$("#tribe-row-delete-dialog");$rule.is(".tribe-event-recurrence")?$dialog.addClass("rule-dialog").removeClass("exclusion-dialog"):$dialog.addClass("exclusion-dialog").removeClass("rule-dialog"),$(".delete-dialog-open").length&&my.event.close_delete_confirmation_dialog($dialog),$dialog.dialog({dialogClass:"tribe-row-delete-dialog",closeOnEscape:!0,resizable:!1,height:$rule[0].offsetHeight,width:$rule[0].offsetWidth,buttons:buttons,position:{my:"center",at:"center",of:$rule},open:function(){var $dialog=$(".tribe-row-delete-dialog"),$buttons=$dialog.find(".ui-dialog-buttonset button"),$content=$dialog.find(".ui-dialog-content");$rule.fadeTo(100,.1),$content.css({height:"auto","min-height":"1.5rem"}),$($buttons[0]).removeClass().addClass("button button-red"),$($buttons[1]).removeClass().addClass("button button-secondary"),$rule.addClass("delete-dialog-open"),$("body").on("click",my.event.close_dialogs),$(window).on("resize",my.event.close_dialogs)},close:function(){$rule.removeClass("delete-dialog-open"),$rule.fadeTo(100,1),$("body").off("click",my.event.close_dialogs),$(window).off("resize",my.event.close_dialogs),setTimeout((function(){$document.trigger("verify.dependency")}),1e3)}})},my.event.close_delete_confirmation_dialog=function($dialog){$dialog&&$dialog.dialog("isOpen")&&$dialog.dialog("close")},my.event.close_dialogs=function(ev){var $dialog=$("#tribe-row-delete-dialog");$dialog.length&&$dialog.dialog("isOpen")&&!$(ev.target).is(".ui-dialog, a")&&!$(ev.target).closest(".ui-dialog").length&&(ev.preventDefault(),ev.stopPropagation(),my.event.close_delete_confirmation_dialog($dialog))},$((function(){my.init()}))}(jQuery,tribe_events_pro_admin.recurrence);