(()=>{"use strict";function e(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Component:t}=wp.element,{Popover:s}=wp.components;class i extends t{constructor(t){super(t),e(this,"getChoices",(()=>{let{choices:e}=this.state;return e.join("\n")})),e(this,"saveChoices",(()=>{const{choices:e}=this.state;this.props.onSave(e),this.props.onClose(!1)})),e(this,"updateChoices",(e=>{e=e.split("\n"),this.setState({choices:e})}));let s=[];void 0!==this.props.choices&&(s=Array.isArray(this.props.choices)?this.props.choices:this.props.choices.split("\n")),this.state={choices:s}}render(){const e=fg_fillablepdfs_import_strings.choices;return React.createElement(s,{position:"middle left",onFocusOutside:e=>this.props.onClose(!1),className:"fillablepdfs-import-fields__choices-modal"},React.createElement("label",{className:"fillablepdfs-import-fields__choices-title",htmlFor:"fillablepdfs-import-fields__choices-input"},e.modalTitle),React.createElement("textarea",{id:"fillablepdfs-import-fields__choices-input",value:this.getChoices(),onChange:e=>this.updateChoices(e.target.value)}),React.createElement("footer",{className:"fillablepdfs-import-fields__choices-buttons"},React.createElement("button",{type:"button",onClick:e=>this.props.onClose(!1)},e.modalButtons.cancel),React.createElement("button",{type:"button",onClick:this.saveChoices},e.modalButtons.save)))}}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function a(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{Component:o,Fragment:c}=wp.element;class n extends o{constructor(){super(),a(this,"toggleChoicesModal",((e=null)=>{this.setState({showChoices:e||!this.state.showChoices})})),a(this,"toggleExclude",(()=>{let e=this.props.meta;e=r(r({},e),{},{exclude:!e.exclude}),this.props.onChange(e,this.props.index)})),a(this,"toggleRequired",(()=>{let e=this.props.meta;e=r(r({},e),{},{required:!e.required}),this.props.onChange(e,this.props.index)})),a(this,"updateChoices",(e=>{let t=this.props.meta;t=r(r({},t),{},{choices:e}),this.props.onChange(t,this.props.index)})),a(this,"updateLabel",(e=>{let t=this.props.meta;t=r(r({},t),{},{label:e}),this.props.onChange(t,this.props.index)})),a(this,"updateType",(e=>{let t=this.props.meta;t=r(r({},t),{},{type:e}),this.props.onChange(t,this.props.index)})),a(this,"isExcluded",(()=>this.props.meta.exclude)),a(this,"hasChoices",((e=!1)=>{const t=fg_fillablepdfs_import_strings.choices_fields;return!1===e&&(e=this.props.meta.type),t.includes(e)})),this.state={showChoices:!1}}static getFieldTypes(){const e=fg_fillablepdfs_import_strings.field_groups;return Object.keys(e).map(((t,s)=>{let i=e[t];return React.createElement("optgroup",{key:t,label:i.label},i.types.map((e=>React.createElement("option",{key:e.type,value:e.type},e.label))))}))}render(){const{label:e,type:t,choices:s,exclude:l,required:r}=this.props.meta,a=fg_fillablepdfs_import_strings,o=this.toggleExclude,p=this.toggleRequired;return React.createElement("tr",null,React.createElement("td",{className:"fillablepdfs-import-fields__label"},React.createElement("input",{type:"text",key:`label-${this.props.index}`,value:e,onChange:e=>this.updateLabel(e.target.value),disabled:this.isExcluded()})),React.createElement("td",{className:"fillablepdfs-import-fields__arrow"},"Â "),React.createElement("td",{className:"fillablepdfs-import-fields__type"},React.createElement("span",null,React.createElement("select",{value:t,onChange:e=>this.updateType(e.target.value),disabled:this.isExcluded()},n.getFieldTypes()),this.hasChoices()&&React.createElement(c,null,React.createElement("button",{type:"button",className:"fillablepdfs-import-fields__choices-button",onClick:e=>this.toggleChoicesModal(),disabled:this.isExcluded()},React.createElement("img",{src:a.choices.buttonImage,width:"18"}),React.createElement("span",{className:"screen-reader-text"},"Configure Field Choices")),this.state.showChoices&&React.createElement(i,{onClose:this.toggleChoicesModal,onSave:this.updateChoices,choices:s})))),React.createElement("td",{className:"fillablepdfs-import-fields__required"},React.createElement("input",{type:"checkbox",checked:r,onChange:p,disabled:this.isExcluded()})),React.createElement("td",{className:"fillablepdfs-import-fields__exclude"},React.createElement("input",{type:"checkbox",checked:l||!1,onChange:o})))}}const{Component:p}=wp.element;class d extends p{constructor(e){super(e),this.updateField=this.updateField.bind(this),this.state={fields:JSON.parse(document.getElementById("fields").value)}}componentDidUpdate(){document.getElementById("fields").value=JSON.stringify(this.state.fields)}updateField(e,t){let s=this.state.fields;s[t]=e,this.setState({fields:s})}render(){const{fields:e}=this.state;return React.createElement("table",{className:"fillablepdfs-import-fields"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{colSpan:"2"},"Field Label"),React.createElement("th",null,"Field Type"),React.createElement("th",{className:"fillablepdfs-import-fields__required"},"Required"),React.createElement("th",{className:"fillablepdfs-import-fields__exclude"},"Exclude"))),React.createElement("tbody",null,e.map(((e,t)=>React.createElement(n,{key:t,index:t,onChange:this.updateField,meta:e})))))}}const{createRoot:h,render:u}=wp.element,m=(e,t)=>{t&&(h?h(t).render(e):u(e,t))};window.addEventListener("load",(()=>{m(React.createElement(d,null),document.getElementById("fillablepdfs-import-fields"))}))})();