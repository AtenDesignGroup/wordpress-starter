"use strict";var WPMailSMTP=window.WPMailSMTP||{};WPMailSMTP.Admin=WPMailSMTP.Admin||{},WPMailSMTP.Admin.Conditionals=WPMailSMTP.Admin.Conditionals||function(l){var r={init:function(){l(r.ready)},ready:function(){r.bindActions()},bindActions:function(){var i=l("#wp-mail-smtp");i.on("change",".wp-mail-smtp-conditional__property",r.processPropertyUpdate),i.on("click",".wp-mail-smtp-conditional__add-rule",r.processRuleAdd),i.on("click",".wp-mail-smtp-conditional__delete-rule",r.processRuleDelete),i.on("click",".wp-mail-smtp-conditional__add-group",r.processGroupAdd)},processPropertyUpdate:function(i){i.preventDefault();var t,o,n=l(this).closest(".wp-mail-smtp-conditional__row"),a=n.find(".wp-mail-smtp-conditional__operator"),e=n.find(".wp-mail-smtp-conditional__value"),p=r.conditionalData(l(this)),i=p.inputName+"["+p.groupID+"]["+p.ruleID+"][value]";n.find(".wp-mail-smtp-conditional__operator option").prop("disabled",!1),p.property?"select"===p.property.type?(o=l("<select>").attr({name:i,class:"wp-mail-smtp-conditional__value"}),p.property.choices&&l.each(p.property.choices,function(i,t){o.append(l("<option>",{value:i,text:t}))}),-1===(t=["==","!="]).indexOf(a.val())&&a.find('option[value="=="]').prop("selected",!0),a.find("option").each(function(){-1===t.indexOf(l(this).val())&&l(this).prop("disabled",!0)})):(e="input"===e.prop("tagName").toLowerCase()?e.val():"",o=l("<input>").attr({type:"text",value:e,name:i,class:"wp-mail-smtp-conditional__value"})):o=l("<select>"),n.find(".wp-mail-smtp-conditional__value-col").empty().append(o)},processRuleAdd:function(i){i.preventDefault();var t=l(this).closest(".wp-mail-smtp-conditional__group").find(".wp-mail-smtp-conditional__row").last(),o=t.clone(),n=o.find(".wp-mail-smtp-conditional__property"),a=o.find(".wp-mail-smtp-conditional__operator"),e=r.conditionalData(n),i="rule-"+(Number(e.ruleID.replace("rule-",""))+1),e=e.inputName+"["+e.groupID+"]["+i+"]";o.find("option:disabled").prop("disabled",!1),o.find("option:selected").prop("selected",!1),o.find("input").val(""),n.attr("name",e+"[property]").attr("data-ruleid",i),a.attr("name",e+"[operator]"),t.after(o),n.change()},processRuleDelete:function(i){i.preventDefault();var t=l(this).closest(".wp-mail-smtp-conditional__group"),i=t.find(".wp-mail-smtp-conditional__row");i&&1===i.length?1<l(this).closest(".wp-mail-smtp-conditional").find(".wp-mail-smtp-conditional__group").length?t.remove():(i.find(".wp-mail-smtp-conditional__operator").val("==").trigger("change"),i.find(".wp-mail-smtp-conditional__value").val("").trigger("change"),i.find(".wp-mail-smtp-conditional__property").find("option:first-child").prop("selected",!0).trigger("change")):l(this).closest(".wp-mail-smtp-conditional__row").remove()},processGroupAdd:function(i){i.preventDefault();var t=l(this).closest(".wp-mail-smtp-conditional").find(".wp-mail-smtp-conditional__group").last(),o=t.clone();o.find(".wp-mail-smtp-conditional__row").not(":first").remove();var n=o.find(".wp-mail-smtp-conditional__property"),a=o.find(".wp-mail-smtp-conditional__operator"),e=r.conditionalData(n),p="group-"+(Number(e.groupID.replace("group-",""))+1),i="rule-0",e=e.inputName+"["+p+"]["+i+"]";o.find("input").val(""),o.find("option:disabled").prop("disabled",!1),o.find("option:selected").prop("selected",!1),n.attr("name",e+"[property]").attr("data-ruleid",i).attr("data-groupid",p),a.attr("name",e+"[operator]"),t.after(o),n.change()},conditionalData:function(i){var t=l(i),i={inputBase:t.closest(".wp-mail-smtp-conditional__row").attr("data-input-name"),ruleID:t.attr("data-ruleid"),groupID:t.attr("data-groupid")};i.inputName=i.inputBase+"[conditionals]";t=t.find("option:selected").val()||t.find("option:first-child").val();return t.length&&void 0!==wp_mail_smtp_conditional_logic.properties[t]?i.property=wp_mail_smtp_conditional_logic.properties[t]:i.property=!1,i}};return r}((document,window,jQuery)),WPMailSMTP.Admin.Conditionals.init();