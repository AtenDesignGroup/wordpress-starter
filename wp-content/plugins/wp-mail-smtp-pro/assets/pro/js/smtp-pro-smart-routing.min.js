"use strict";var WPMailSMTP=window.WPMailSMTP||{};WPMailSMTP.Admin=WPMailSMTP.Admin||{},WPMailSMTP.Admin.SmartRouting=WPMailSMTP.Admin.SmartRouting||function(o){var t={init:function(){o(t.ready)},ready:function(){t.bindActions()},bindActions:function(){o(".wp-mail-smtp-tab-routing").on("change",".wp-mail-smtp-smart-routing-route__connection",t.processConnectionUpdate).on("click",".wp-mail-smtp-smart-routing-route-add",t.processRouteAdd).on("click",".wp-mail-smtp-smart-routing-route__delete",t.processRouteDelete).on("click",".wp-mail-smtp-smart-routing-route__order-btn",t.processRouteOrder)},processConnectionUpdate:function(t){o(this).hasClass("wp-mail-smtp-smart-routing-route__connection--invalid")&&(o(this).removeClass("wp-mail-smtp-smart-routing-route__connection--invalid"),o(this).closest(".wp-mail-smtp-smart-routing-route").find(".wp-mail-smtp-smart-routing-route__notice--invalid").slideUp())},processRouteAdd:function(t){t.preventDefault();var e=o(".wp-mail-smtp-smart-routing-route__connection").map(function(){return o(this).attr("name").match(/\[route-(\d)]/)[1]}).get().reduce(function(t,e){return Math.max(t,e)},0),r=o(".wp-mail-smtp-smart-routing-route"),t=wp.template("wp-mail-smtp-smart-route"),e={routeIndex:"route-"+(e+1)};r.last().after(t(e)),o(".wp-mail-smtp-smart-routing-route__delete").prop("disabled",!1),o("html").animate({scrollTop:r.last().offset().top},500)},processRouteDelete:function(t){t.preventDefault();var e=o(".wp-mail-smtp-smart-routing-route"),t=o(this).closest(".wp-mail-smtp-smart-routing-route");1<e.length?t.remove():(e=wp.template("wp-mail-smtp-smart-route"),t.replaceWith(e({routeIndex:"route-0"})))},processRouteOrder:function(t){t.preventDefault();var e,t=o(this).closest(".wp-mail-smtp-smart-routing-route");o(this).hasClass("wp-mail-smtp-smart-routing-route__order-btn--down")?0!==(e=t.next(".wp-mail-smtp-smart-routing-route")).length&&e.after(t):0!==(e=t.prev(".wp-mail-smtp-smart-routing-route")).length&&e.before(t)}};return t}((document,window,jQuery)),WPMailSMTP.Admin.SmartRouting.init();